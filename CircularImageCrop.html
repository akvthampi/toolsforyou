<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PerfectCircleCrop - Accurate Round Image Cropping</title>
    <meta name="description" content="Free online tool to accurately crop your images into perfect circles. Customize the circular area and download your round images.">
    <meta name="keywords" content="round image, circle crop, circular image, photo editing, image tool">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #8E2DE2 0%, #4A00E0 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            margin: 40px 0;
        }
        
        header {
            background: linear-gradient(90deg, #5D3FD3 0%, #8B5CF6 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        @media (min-width: 992px) {
            .main-content {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .upload-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            border: 2px dashed #5D3FD3;
        }
        
        .upload-icon {
            font-size: 3rem;
            color: #5D3FD3;
            margin-bottom: 15px;
        }
        
        .upload-btn {
            background: #5D3FD3;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        .upload-btn:hover {
            background: #4A00E0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .controls-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .slider {
            flex: 1;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #5D3FD3;
            cursor: pointer;
        }
        
        .slider-value {
            font-weight: 600;
            color: #5D3FD3;
            min-width: 40px;
            text-align: center;
        }
        
        .crop-preview {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        @media (min-width: 992px) {
            .crop-preview {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .preview-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #eaeaea;
        }
        
        .preview-header {
            background: #f8f9fa;
            padding: 15px;
            font-weight: 600;
            color: #5D3FD3;
            text-align: center;
            border-bottom: 1px solid #eaeaea;
        }
        
        .preview-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 350px;
            justify-content: center;
            position: relative;
        }
        
        .image-container {
            position: relative;
            display: inline-block;
            max-width: 100%;
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 300px;
            display: block;
        }
        
        .circle-preview {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid #5D3FD3;
            background-size: cover;
            background-position: center;
        }
        
        .image-info {
            margin-top: 15px;
            text-align: center;
            font-size: 0.9rem;
            color: #666;
        }
        
        .crop-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .crop-area {
            position: absolute;
            border: 2px dashed #5D3FD3;
            border-radius: 50%;
            cursor: move;
            box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.4);
            pointer-events: all;
        }
        
        .crop-handle {
            position: absolute;
            width: 16px;
            height: 16px;
            background: #5D3FD3;
            border: 2px solid white;
            border-radius: 50%;
            bottom: -8px;
            right: -8px;
            cursor: nwse-resize;
        }
        
        .action-buttons {
            grid-column: 1 / -1;
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: #5D3FD3;
            color: white;
        }
        
        .btn-primary:hover {
            background: #4A00E0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: white;
            margin-top: auto;
        }
        
        .instructions {
            max-width: 800px;
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .instructions h2 {
            color: #5D3FD3;
            margin-bottom: 15px;
        }
        
        .instructions p {
            margin-bottom: 15px;
            line-height: 1.8;
        }
        
        .steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .step {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .step i {
            font-size: 2rem;
            color: #5D3FD3;
            margin-bottom: 15px;
        }
        
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #5D3FD3;
            color: white;
            border-radius: 50%;
            line-height: 30px;
            margin-right: 10px;
        }
        
        .coordinate-display {
            margin-top: 10px;
            font-size: 12px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>PerfectCircleCrop</h1>
            <p class="subtitle">Accurately crop your images into perfect circles with precision</p>
        </header>
        
        <div class="main-content">
            <div class="upload-section">
                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                <h3>Upload Your Image</h3>
                <p>Supported formats: JPG, PNG, WebP</p>
                <p>Max file size: 5MB</p>
                <input type="file" id="imageUpload" accept="image/*" hidden>
                <button class="upload-btn" onclick="document.getElementById('imageUpload').click()">
                    Select Image
                </button>
            </div>
            
            <div class="controls-section">
                <h3>Crop Controls</h3>
                
                <div class="control-group">
                    <label for="circleSize">Circle Size</label>
                    <div class="slider-container">
                        <input type="range" min="50" max="300" value="150" class="slider" id="circleSize">
                        <span class="slider-value" id="sizeValue">150px</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="borderWidth">Border Width</label>
                    <div class="slider-container">
                        <input type="range" min="0" max="20" value="3" class="slider" id="borderWidth">
                        <span class="slider-value" id="borderValue">3px</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label for="borderColor">Border Color</label>
                    <input type="color" id="borderColor" value="#5D3FD3">
                </div>
                
                <div class="control-group">
                    <label>
                        <input type="checkbox" id="addShadow" checked>
                        Add Shadow Effect
                    </label>
                </div>
            </div>
            
            <div class="crop-preview">
                <div class="preview-card">
                    <div class="preview-header">Original Image</div>
                    <div class="preview-content">
                        <div class="image-container" id="imageContainer">
                            <img src="" alt="Original image preview" class="image-preview" id="originalPreview">
                            <div class="crop-overlay">
                                <div class="crop-area" id="cropArea" style="display: none;">
                                    <div class="crop-handle"></div>
                                </div>
                            </div>
                        </div>
                        <div class="image-info" id="originalInfo">No image selected</div>
                        <div class="coordinate-display" id="coordinates">Position: 0, 0 | Size: 0px</div>
                    </div>
                </div>
                
                <div class="preview-card">
                    <div class="preview-header">Circular Preview</div>
                    <div class="preview-content">
                        <div class="circle-preview" id="circlePreview"></div>
                        <div class="image-info" id="circleInfo">Upload an image to see preview</div>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="cropBtn">Crop to Circle</button>
                <button class="btn btn-secondary" id="downloadBtn" disabled>Download Circle Image</button>
            </div>
        </div>
    </div>
    
    <div class="instructions">
        <h2>How to Create Circular Images</h2>
        <p>Our CircleCrop tool makes it easy to create perfect circular images for avatars, logos, and social media profiles.</p>
        
        <div class="steps">
            <div class="step">
                <i class="fas fa-upload"></i>
                <h3><span class="step-number">1</span> Upload Image</h3>
                <p>Select your image from your device</p>
            </div>
            <div class="step">
                <i class="fas fa-crop-alt"></i>
                <h3><span class="step-number">2</span> Adjust Circle</h3>
                <p>Resize and position the circular crop area</p>
            </div>
            <div class="step">
                <i class="fas fa-download"></i>
                <h3><span class="step-number">3</span> Download</h3>
                <p>Save your circular image in PNG format</p>
            </div>
        </div>
        
        <h2>Tips for Perfect Circle Crops</h2>
        <p>1. For best results, use square images or images where the main subject is centered.</p>
        <p>2. Use the circle size slider to adjust the dimensions of your circular image.</p>
        <p>3. Add a border to make your circular image stand out on different backgrounds.</p>
        <p>4. Use the shadow effect to give your circular image depth and dimension.</p>
    </div>
    
    <footer>
        <p>© 2023 PerfectCircleCrop | Create perfect circular images with accurate positioning</p>
    </footer>

    <script>
        // DOM Elements
        const imageUpload = document.getElementById('imageUpload');
        const circleSize = document.getElementById('circleSize');
        const sizeValue = document.getElementById('sizeValue');
        const borderWidth = document.getElementById('borderWidth');
        const borderValue = document.getElementById('borderValue');
        const borderColor = document.getElementById('borderColor');
        const originalPreview = document.getElementById('originalPreview');
        const circlePreview = document.getElementById('circlePreview');
        const originalInfo = document.getElementById('originalInfo');
        const circleInfo = document.getElementById('circleInfo');
        const cropArea = document.getElementById('cropArea');
        const imageContainer = document.getElementById('imageContainer');
        const cropBtn = document.getElementById('cropBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const addShadow = document.getElementById('addShadow');
        const coordinates = document.getElementById('coordinates');
        
        // Variables for crop functionality
        let isDragging = false;
        let isResizing = false;
        let startX, startY;
        let cropX = 0, cropY = 0;
        let cropSize = 150;
        let imageWidth = 0, imageHeight = 0;
        let displayScale = 1;
        
        // Event Listeners for sliders
        circleSize.addEventListener('input', () => {
            sizeValue.textContent = `${circleSize.value}px`;
            cropSize = parseInt(circleSize.value);
            updateCropArea();
            updateCirclePreview();
            updateCoordinateDisplay();
        });
        
        borderWidth.addEventListener('input', () => {
            borderValue.textContent = `${borderWidth.value}px`;
            updateCirclePreview();
        });
        
        borderColor.addEventListener('input', updateCirclePreview);
        addShadow.addEventListener('change', updateCirclePreview);
        
        // Handle image upload
        imageUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file || !file.type.match('image.*')) {
                alert('Please select a valid image file.');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                alert('File size exceeds 5MB limit. Please choose a smaller image.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                originalPreview.src = event.target.result;
                originalPreview.onload = function() {
                    imageWidth = originalPreview.naturalWidth;
                    imageHeight = originalPreview.naturalHeight;
                    
                    originalInfo.textContent = `Dimensions: ${imageWidth}×${imageHeight}px`;
                    
                    // Calculate display scale
                    const containerWidth = imageContainer.offsetWidth;
                    displayScale = containerWidth / imageWidth;
                    
                    // Initialize crop area
                    cropSize = parseInt(circleSize.value);
                    cropX = (imageWidth - cropSize) / 2;
                    cropY = (imageHeight - cropSize) / 2;
                    
                    // Show and update crop area
                    cropArea.style.display = 'block';
                    updateCropArea();
                    
                    // Enable buttons
                    cropBtn.disabled = false;
                    
                    // Update circle preview
                    updateCirclePreview();
                    updateCoordinateDisplay();
                };
            };
            reader.readAsDataURL(file);
        });
        
        // Handle crop area movement
        cropArea.addEventListener('mousedown', function(e) {
            if (e.target.classList.contains('crop-handle')) {
                isResizing = true;
            } else {
                isDragging = true;
            }
            startX = e.clientX;
            startY = e.clientY;
            e.preventDefault();
        });
        
        document.addEventListener('mousemove', function(e) {
            if (!isDragging && !isResizing) return;
            
            const dx = (e.clientX - startX) / displayScale;
            const dy = (e.clientY - startY) / displayScale;
            
            if (isDragging) {
                // Move crop area
                cropX += dx;
                cropY += dy;
                
                // Constrain to image bounds
                const maxX = imageWidth - cropSize;
                const maxY = imageHeight - cropSize;
                cropX = Math.max(0, Math.min(cropX, maxX));
                cropY = Math.max(0, Math.min(cropY, maxY));
                
                updateCropArea();
            } else if (isResizing) {
                // Resize crop area (maintain aspect ratio)
                const newSize = Math.max(50, Math.min(cropSize + dx * 2, Math.min(imageWidth, imageHeight)));
                cropSize = newSize;
                circleSize.value = cropSize;
                sizeValue.textContent = `${cropSize}px`;
                
                // Adjust position to keep centered on resize
                const maxX = imageWidth - cropSize;
                const maxY = imageHeight - cropSize;
                cropX = Math.max(0, Math.min(cropX, maxX));
                cropY = Math.max(0, Math.min(cropY, maxY));
                
                updateCropArea();
            }
            
            startX = e.clientX;
            startY = e.clientY;
            updateCirclePreview();
            updateCoordinateDisplay();
        });
        
        document.addEventListener('mouseup', function() {
            isDragging = false;
            isResizing = false;
        });
        
        // Handle crop button click
        cropBtn.addEventListener('click', function() {
            if (!originalPreview.src) {
                alert('Please upload an image first.');
                return;
            }
            
            updateCirclePreview();
            downloadBtn.disabled = false;
        });
        
        // Handle download button click
        downloadBtn.addEventListener('click', function() {
            // Create a canvas for the circular image
            const canvas = document.createElement('canvas');
            const size = parseInt(circleSize.value);
            const borderWidthValue = parseInt(borderWidth.value);
            canvas.width = size + borderWidthValue * 2;
            canvas.height = size + borderWidthValue * 2;
            const ctx = canvas.getContext('2d');
            
            // Draw border if needed
            if (borderWidthValue > 0) {
                ctx.fillStyle = borderColor.value;
                ctx.beginPath();
                ctx.arc(canvas.width/2, canvas.height/2, size/2 + borderWidthValue, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Draw circular image
            ctx.save();
            ctx.beginPath();
            ctx.arc(canvas.width/2, canvas.height/2, size/2, 0, Math.PI * 2);
            ctx.closePath();
            ctx.clip();
            
            ctx.drawImage(
                originalPreview,
                cropX, cropY, cropSize, cropSize,
                borderWidthValue, borderWidthValue, size, size
            );
            
            ctx.restore();
            
            // Add shadow if enabled
            if (addShadow.checked) {
                ctx.shadowColor = 'rgba(0, 0, 0, 0.5)';
                ctx.shadowBlur = 10;
                ctx.shadowOffsetY = 3;
                ctx.drawImage(canvas, 0, 0);
            }
            
            // Create download link
            const link = document.createElement('a');
            link.download = 'circular-image.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
        
        // Helper functions
        function updateCropArea() {
            if (!originalPreview.src) return;
            
            const displaySize = cropSize * displayScale;
            const displayX = cropX * displayScale;
            const displayY = cropY * displayScale;
            
            cropArea.style.width = `${displaySize}px`;
            cropArea.style.height = `${displaySize}px`;
            cropArea.style.left = `${displayX}px`;
            cropArea.style.top = `${displayY}px`;
        }
        
        function updateCirclePreview() {
            if (!originalPreview.src) return;
            
            // Update circle preview style
            const borderWidthValue = parseInt(borderWidth.value);
            circlePreview.style.borderWidth = `${borderWidthValue}px`;
            circlePreview.style.borderColor = borderColor.value;
            circlePreview.style.width = `${cropSize + borderWidthValue * 2}px`;
            circlePreview.style.height = `${cropSize + borderWidthValue * 2}px`;
            
            if (addShadow.checked) {
                circlePreview.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.3)';
            } else {
                circlePreview.style.boxShadow = 'none';
            }
            
            // Create a canvas for the circular preview
            const canvas = document.createElement('canvas');
            canvas.width = cropSize;
            canvas.height = cropSize;
            const ctx = canvas.getContext('2d');
            
            // Draw circular image
            ctx.save();
            ctx.beginPath();
            ctx.arc(cropSize/2, cropSize/2, cropSize/2, 0, Math.PI * 2);
            ctx.closePath();
            ctx.clip();
            
            ctx.drawImage(
                originalPreview,
                cropX, cropY, cropSize, cropSize,
                0, 0, cropSize, cropSize
            );
            
            ctx.restore();
            
            // Update preview
            circlePreview.style.backgroundImage = `url(${canvas.toDataURL('image/png')})`;
            circleInfo.textContent = `Size: ${cropSize}×${cropSize}px`;
        }
        
        function updateCoordinateDisplay() {
            coordinates.textContent = `Position: ${Math.round(cropX)}, ${Math.round(cropY)} | Size: ${cropSize}px`;
        }
        
        // Initialize values
        sizeValue.textContent = `${circleSize.value}px`;
        borderValue.textContent = `${borderWidth.value}px`;
        
        // Make responsive on window resize
        window.addEventListener('resize', function() {
            if (originalPreview.src) {
                const containerWidth = imageContainer.offsetWidth;
                displayScale = containerWidth / imageWidth;
                updateCropArea();
            }
        });
    </script>
</body>
</html>